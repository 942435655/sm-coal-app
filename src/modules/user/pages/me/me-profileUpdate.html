<ion-header>
  <ion-navbar>
    <ion-title>
      更新个人信息
    </ion-title>

    <ion-buttons end *ngIf="false && item == 'avatar' || !heyApp.helper.platform.is('ios')">
      <button ion-button (click)="showActionSheet()">
          <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content id="me" class="page-updateProfile">
  <ion-list padding-top [hidden]="item !== 'name'">
    <ion-item>
      <ion-input [(ngModel)]="userInfo.nickname" (ngModelChange)="isUpdated = 'nickname'" name="nickname" type="text" placeholder="昵称" required minlength="3"></ion-input>
    </ion-item>
  </ion-list>

  <ion-list padding-top [hidden]="item !== 'userName'">
    <ion-item>
      <ion-textarea [(ngModel)]="userInfo.userName" (ngModelChange)="isUpdated = 'userName'" name="userName" placeholder="姓名">
      </ion-textarea>
    </ion-item>
  </ion-list>

  <ion-list padding-top radio-group [(ngModel)]="userInfo.role" (ngModelChange)="isUpdated = 'role'" [hidden]="item !== 'role'">
    <ion-item>
      <ion-label>煤炭买家</ion-label>
      <ion-radio name="role" checked="true" value="1"></ion-radio>
    </ion-item>

    <ion-item>
      <ion-label>煤炭卖家</ion-label>
      <ion-radio name="role" value="2"></ion-radio>
    </ion-item>

    <ion-item>
      <ion-label>货车司机</ion-label>
      <ion-radio name="role" value="3"></ion-radio>
    </ion-item>
  </ion-list>


  <ion-list padding-top [hidden]="item !== 'bio'">
    <ion-item>
      <ion-textarea [(ngModel)]="userInfo.bio" (ngModelChange)="isUpdated = 'bio'" name="bio" placeholder="个性签名">
      </ion-textarea>
    </ion-item>
  </ion-list>

  <ion-list padding-top radio-group [(ngModel)]="userInfo.gender" (ngModelChange)="isUpdated = 'gender'" [hidden]="item !== 'gender'">
    <ion-item>
      <ion-label>男性</ion-label>
      <ion-radio name="gender" checked="true" value="1"></ion-radio>
    </ion-item>

    <ion-item>
      <ion-label>女性</ion-label>
      <ion-radio name="gender" value="2"></ion-radio>
    </ion-item>
  </ion-list>

  <div padding class="text-center" [hidden]="item !== 'avatar'">
    <div class="avatar-box">
      <div>
        <img imageViewer style="" src="{{ heyApp.helper.getImg(userInfo.avatar) }}?imageView/2/w/400">
      </div>
      <button color="grey" ion-button block>
        点击这里选择新头像
        <input class="input-avatar" #inputAvatar type="file" (change)="uploadAvatar($event)" accept="image/*">
      </button>
    </div>
  </div>

  <div [hidden]="item == 'avatar'">
    <button full  color="primary" ion-button block [disabled]="!isUpdated" (click)="onsubmit()">保 存</button>
  </div>
</ion-content>
